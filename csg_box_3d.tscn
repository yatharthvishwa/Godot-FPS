[gd_scene load_steps=22 format=3 uid="uid://cb4l4kl7fo3s4"]

[ext_resource type="PackedScene" uid="uid://bwggrf7sbmkcv" path="res://Scenes/PlayerCharacterScene.tscn" id="1_bhx6w"]
[ext_resource type="Shader" uid="uid://ptensb1opooj" path="res://Shader/ps1postprocess.gdshader" id="1_hye88"]
[ext_resource type="Texture2D" uid="uid://ctwrwuewfji14" path="res://assets/skybox/AllSkyFree_Sky_DeepDusk_Equirect.png" id="2_4yx5b"]
[ext_resource type="Texture2D" uid="uid://d2dylehruhuja" path="res://assets/PNG/Orange/texture_11.png" id="3_hphl3"]
[ext_resource type="Texture2D" uid="uid://bkll7dtn7kp8" path="res://assets/textures/256x256/Stone/Stone_10-256x256.png" id="4_40f1b"]
[ext_resource type="Texture2D" uid="uid://dwem23d56ajv8" path="res://assets/textures/256x256/Stone/Stone_18-256x256.png" id="5_1rqdr"]
[ext_resource type="Shader" uid="uid://c1poyisnjfhum" path="res://Shader/modelps1.gdshader" id="6_t7y16"]
[ext_resource type="Texture2D" uid="uid://bd5ujp5b3qn2f" path="res://assets/textures/256x256/Tile/Tile_10-256x256.png" id="7_hye88"]
[ext_resource type="AudioStream" uid="uid://cjae0g8ww244w" path="res://MonsterEnemy/02. Cultist Base.mp3" id="9_4yx5b"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wdpmp"]
shader = ExtResource("1_hye88")
shader_parameter/enabled = true
shader_parameter/dithering = true
shader_parameter/colors = 16
shader_parameter/dither_size = 1

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_hye88"]
panorama = ExtResource("2_4yx5b")
energy_multiplier = 0.5

[sub_resource type="Sky" id="Sky_wdpmp"]
sky_material = SubResource("PanoramaSkyMaterial_hye88")
radiance_size = 0

[sub_resource type="Environment" id="Environment_e38of"]
background_mode = 2
sky = SubResource("Sky_wdpmp")
ambient_light_source = 3
ambient_light_color = Color(0.854907, 0.0329242, 0.385782, 1)
ambient_light_energy = 7.45
reflected_light_source = 2
tonemap_mode = 3
tonemap_exposure = 0.45
glow_enabled = true
glow_bloom = 0.76
fog_enabled = true
fog_light_color = Color(1, 0.162671, 0.0307005, 1)
fog_light_energy = 0.56
fog_sun_scatter = 0.07
fog_sky_affect = 0.147
fog_depth_begin = 2427.5
fog_depth_end = 2427.5
adjustment_enabled = true
adjustment_brightness = 0.91
adjustment_contrast = 1.14
adjustment_saturation = 0.82

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_40f1b"]
albedo_texture = ExtResource("3_hphl3")
uv1_scale = Vector3(-0.1, -0.1, -0.1)
uv1_triplanar = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8vum1"]
albedo_texture = ExtResource("5_1rqdr")
uv1_scale = Vector3(-0.59, 1, 1)
uv1_triplanar = true
texture_filter = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4yx5b"]
render_priority = 0
shader = ExtResource("6_t7y16")
shader_parameter/affine_mapping = true
shader_parameter/albedo = ExtResource("7_hye88")
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)

[sub_resource type="BoxMesh" id="BoxMesh_t7y16"]
material = SubResource("ShaderMaterial_4yx5b")
size = Vector3(8, 1, 8)

[sub_resource type="BoxShape3D" id="BoxShape3D_hye88"]
size = Vector3(8, 1, 8)

[sub_resource type="NavigationMesh" id="NavigationMesh_hye88"]
vertices = PackedVector3Array(-499.5, 1, -499.5, -499.5, 1, 499.5, 499.5, 1, 499.5, 499.5, 1, -499.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1rqdr"]
albedo_texture = ExtResource("4_40f1b")
uv1_scale = Vector3(0.065, 0.13, 0.13)
uv1_triplanar = true
texture_filter = 2

[sub_resource type="BoxMesh" id="BoxMesh_hphl3"]
size = Vector3(1000, 1, 1000)

[node name="world" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
material = SubResource("ShaderMaterial_wdpmp")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(320, 240)
render_target_update_mode = 4

[node name="PlayerCharacter" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_bhx6w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.01019, 3.59542, 2.14783)

[node name="view_model_camera" parent="SubViewportContainer/SubViewport/PlayerCharacter/CameraHolder/Camera3D/SubViewportContainer/SubViewport" index="0"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 1.39373, 5.20329, 1.77219)

[node name="SpotLight3D" type="SpotLight3D" parent="SubViewportContainer/SubViewport/PlayerCharacter"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 3, -1.31134e-07)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 0.254146, 0.967166, 0, -0.967166, 0.254146, -10.4601, 19.6882, 28.5545)
light_color = Color(0.92784, 0.83315, 0.697363, 1)
light_energy = 3.601
light_specular = 0.0
shadow_enabled = true
shadow_normal_bias = 0.0
shadow_transmittance_bias = -16.0
shadow_opacity = 0.45

[node name="WorldEnvironment" type="WorldEnvironment" parent="SubViewportContainer/SubViewport"]
environment = SubResource("Environment_e38of")

[node name="CSGBox3D3" type="CSGBox3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 32.0294, 6.47603, 20.215)
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(20.0693, 1, 20.072)

[node name="CSGBox3D4" type="CSGBox3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.3109, 8.99434, 20.215)
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(20.0693, 1, 20.072)

[node name="platform" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 33.4311, 6, 0)
material_override = SubResource("StandardMaterial3D_8vum1")
mesh = SubResource("BoxMesh_t7y16")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/platform"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/platform/StaticBody3D"]
shape = SubResource("BoxShape3D_hye88")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.76837e-07, 0)
navigation_mesh = SubResource("NavigationMesh_hye88")

[node name="CSGBox3D" type="CSGBox3D" parent="SubViewportContainer/SubViewport/NavigationRegion3D"]
visible = false
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(1000, 1, 1000)

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/NavigationRegion3D"]
material_override = SubResource("StandardMaterial3D_1rqdr")
mesh = SubResource("BoxMesh_hphl3")
skeleton = NodePath("../../../..")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_4yx5b")
autoplay = true

[node name="Label" type="Label" parent="."]
top_level = true
offset_right = 263.0
offset_bottom = 75.0
scale = Vector2(0.46, 0.46)
text = "press shift to toggle sprint
use ctrl while sprinting to slide
press space to jump/ double jump"

[editable path="SubViewportContainer/SubViewport/PlayerCharacter"]
