[gd_scene load_steps=23 format=3 uid="uid://cb4l4kl7fo3s4"]

[ext_resource type="PackedScene" uid="uid://bwggrf7sbmkcv" path="res://Scenes/PlayerCharacterScene.tscn" id="1_bhx6w"]
[ext_resource type="Shader" uid="uid://ptensb1opooj" path="res://Shader/ps1postprocess.gdshader" id="1_hye88"]
[ext_resource type="Texture2D" uid="uid://ctwrwuewfji14" path="res://assets/skybox/AllSkyFree_Sky_DeepDusk_Equirect.png" id="1_wdpmp"]
[ext_resource type="Texture2D" uid="uid://d2dylehruhuja" path="res://assets/PNG/Orange/texture_11.png" id="3_hphl3"]
[ext_resource type="Texture2D" uid="uid://bkll7dtn7kp8" path="res://assets/textures/256x256/Stone/Stone_10-256x256.png" id="4_40f1b"]
[ext_resource type="Texture2D" uid="uid://dwem23d56ajv8" path="res://assets/textures/256x256/Stone/Stone_18-256x256.png" id="5_1rqdr"]
[ext_resource type="Shader" uid="uid://c1poyisnjfhum" path="res://Shader/modelps1.gdshader" id="6_t7y16"]
[ext_resource type="Texture2D" uid="uid://bd5ujp5b3qn2f" path="res://assets/textures/256x256/Tile/Tile_10-256x256.png" id="7_hye88"]
[ext_resource type="AudioStream" uid="uid://cjae0g8ww244w" path="res://02. Cultist Base.mp3" id="9_4yx5b"]
[ext_resource type="PackedScene" uid="uid://dwglchq303teg" path="res://Enemy/enemy.tscn" id="10_wdpmp"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_e38of"]
panorama = ExtResource("1_wdpmp")

[sub_resource type="Sky" id="Sky_2ahs6"]
sky_material = SubResource("PanoramaSkyMaterial_e38of")
radiance_size = 0

[sub_resource type="Environment" id="Environment_e38of"]
background_mode = 2
sky = SubResource("Sky_2ahs6")
ambient_light_source = 2
ambient_light_color = Color(0.78477, 0.0690236, 1.92523e-07, 1)
tonemap_mode = 3
fog_enabled = true
fog_light_color = Color(0.666347, 0.144726, 0.212494, 1)
fog_light_energy = 0.3
fog_sky_affect = 0.165

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wdpmp"]
shader = ExtResource("1_hye88")
shader_parameter/enabled = true
shader_parameter/dithering = true
shader_parameter/colors = 16
shader_parameter/dither_size = 1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_40f1b"]
albedo_texture = ExtResource("3_hphl3")
uv1_scale = Vector3(-0.1, -0.1, -0.1)
uv1_triplanar = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8vum1"]
albedo_texture = ExtResource("5_1rqdr")
uv1_scale = Vector3(-0.59, 1, 1)
uv1_triplanar = true
texture_filter = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4yx5b"]
render_priority = 0
shader = ExtResource("6_t7y16")
shader_parameter/affine_mapping = true
shader_parameter/albedo = ExtResource("7_hye88")
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)

[sub_resource type="BoxMesh" id="BoxMesh_t7y16"]
material = SubResource("ShaderMaterial_4yx5b")
size = Vector3(8, 1, 8)

[sub_resource type="BoxShape3D" id="BoxShape3D_hye88"]
size = Vector3(8, 1, 8)

[sub_resource type="NavigationMesh" id="NavigationMesh_hye88"]
vertices = PackedVector3Array(-499.5, 1, -499.5, -499.5, 1, 499.5, 499.5, 1, 499.5, 499.5, 1, -499.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1rqdr"]
albedo_texture = ExtResource("4_40f1b")
uv1_scale = Vector3(0.065, 0.13, 0.13)
uv1_triplanar = true
texture_filter = 2

[sub_resource type="BoxMesh" id="BoxMesh_hphl3"]
size = Vector3(1000, 1, 1000)

[node name="world" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_e38of")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
material = SubResource("ShaderMaterial_wdpmp")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(320, 240)
render_target_update_mode = 4

[node name="PlayerCharacter" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_bhx6w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.5722, 63.076, 8.64972)

[node name="CSGBox3D3" type="CSGBox3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 32.0294, 6.47603, 20.215)
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(20.0693, 1, 20.072)

[node name="CSGBox3D4" type="CSGBox3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.3109, 10.0703, 20.215)
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(20.0693, 1, 20.072)

[node name="platform" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 33.4311, 6, 0)
material_override = SubResource("StandardMaterial3D_8vum1")
mesh = SubResource("BoxMesh_t7y16")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/platform"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/platform/StaticBody3D"]
shape = SubResource("BoxShape3D_hye88")

[node name="platform2" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(2.93, 0, 0, 0, 2.93, 0, 0, 0, 2.93, 23.0687, 59.0476, 18.6352)
material_override = SubResource("StandardMaterial3D_8vum1")
mesh = SubResource("BoxMesh_t7y16")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/platform2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/platform2/StaticBody3D"]
shape = SubResource("BoxShape3D_hye88")

[node name="platform3" type="MeshInstance3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(17.8345, -1.09404, 0, 7.17847, 2.71808, 0, 0, 0, 2.93, -58.2541, 30.1771, 18.6352)
material_override = SubResource("StandardMaterial3D_8vum1")
mesh = SubResource("BoxMesh_t7y16")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/platform3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/platform3/StaticBody3D"]
shape = SubResource("BoxShape3D_hye88")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.76837e-07, 0)
navigation_mesh = SubResource("NavigationMesh_hye88")

[node name="CSGBox3D" type="CSGBox3D" parent="SubViewportContainer/SubViewport/NavigationRegion3D"]
visible = false
material_override = SubResource("StandardMaterial3D_40f1b")
use_collision = true
size = Vector3(1000, 1, 1000)

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/NavigationRegion3D"]
material_override = SubResource("StandardMaterial3D_1rqdr")
mesh = SubResource("BoxMesh_hphl3")
skeleton = NodePath("../../../..")

[node name="Enemy" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -19.1242, 49.026, 12.2265)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy3" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -47.1242, 37.8291, 12.2265)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy4" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -47.1242, 0.50293, -20.7735)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy5" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -47.1242, 0.50293, -4.7735)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy6" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -71.1242, 0.50293, -4.7735)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy8" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -96.3242, 0.50293, 10.4785)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy7" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -27.1242, 0.50293, -4.7735)
player_path = NodePath("../../PlayerCharacter")

[node name="Enemy2" parent="SubViewportContainer/SubViewport/NavigationRegion3D" instance=ExtResource("10_wdpmp")]
transform = Transform3D(2.52, 0, 0, 0, 2.52, 0, 0, 0, 2.52, -21.9941, 16.13, 12.2265)
player_path = NodePath("../../PlayerCharacter")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_4yx5b")
volume_db = -7.042
autoplay = true

[node name="Label" type="Label" parent="."]
visible = false
top_level = true
offset_right = 263.0
offset_bottom = 75.0
scale = Vector2(0.46, 0.46)
text = "press shift to toggle sprint
use ctrl while sprinting to slide
press space to jump/ double jump"

[connection signal="enemydeath" from="SubViewportContainer/SubViewport/PlayerCharacter/CameraHolder/Camera3D/Sword" to="SubViewportContainer/SubViewport/NavigationRegion3D/Enemy" method="_on_sword_enemydeath"]

[editable path="SubViewportContainer/SubViewport/PlayerCharacter"]
